<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Jundlela Trading | Tent & Deco Hire</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: Arial, Helvetica, sans-serif;
      background: #f4f6f8;
      color: #333;
    }
    header {
      background: #1e293b;
      color: #fff;
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
    }
    nav a {
      color: #fff;
      margin-left: 1rem;
      text-decoration: none;
      font-weight: bold;
    }
    .hero {
      padding: 3rem 2rem;
      text-align: center;
      background: linear-gradient(135deg, #2563eb, #1e40af);
      color: white;
    }
    .container {
      max-width: 1000px;
      margin: 2rem auto;
      padding: 0 1rem;
    }
    .card {
      background: #fff;
      padding: 2rem;
      border-radius: 14px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.08);
      margin-bottom: 2rem;
    }
    input, textarea, select {
      width: 100%;
      padding: 0.7rem;
      border-radius: 8px;
      border: 1px solid #cbd5e1;
      font-size: 1rem;
    }
    button {
      padding: 0.7rem 1.5rem;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      background: #2563eb;
      color: #fff;
    }
    footer {
      text-align: center;
      padding: 1rem;
      background: #e5e7eb;
      margin-top: 2rem;
    }
  </style>
</head>
<body>

<header>
  <h2>Jundlela Trading</h2>
  <nav>
    <a href="#home">Home</a>
    <a href="#about">Services</a>
    <a href="#contact">Book</a>
  </nav>
</header>

<section class="hero" id="home">
  <h1>Jundlela Trading</h1>
  <p>Tent & Decoration Hire</p>
</section>

<div class="container">

  <!-- ADMIN ACCESS -->
  <div class="card" id="adminGate">
    <h3>Admin Access</h3>
    <input type="password" id="adminPin" placeholder="Enter PIN" />
    <button id="openAdminBtn">Open Admin</button>
    <p id="adminStatus" style="color:red;"></p>
  </div>

  <!-- ADMIN PANEL -->
  <div class="card" id="admin" style="display:none;">
    <h4>Change Admin PIN</h4>
    <input type="password" id="newPin" placeholder="New PIN" />
    <button onclick="changePin()">Change PIN</button>
    <hr />
    <h3>Bookings Admin</h3>
    <button id="loadBookingsBtn">Load Bookings</button>
    <button id="clearBookingsBtn">Clear All</button>
    <table border="1" width="100%" style="margin-top:1rem; border-collapse:collapse;">
      <thead>
        <tr>
          <th>Name</th>
          <th>Phone</th>
          <th>Event</th>
          <th>Date</th>
          <th>Location</th>
          <th>Details</th>
          <th>Saved</th>
        </tr>
      </thead>
      <tbody id="bookingsBody"></tbody>
    </table>
  </div>

  <!-- SERVICES -->
  <div class="card" id="about">
    <h3>Services</h3>
    <ul>
      <li>9m x 20m Tent</li>
      <li>9m x 16m Tent</li>
      <li>9m x 12m Tent</li>
      <li>Green Carpet Included</li>
    </ul>
  </div>

  <!-- BOOKING FORM -->
  <div class="card" id="contact">
    <h3>Booking Request</h3>
    <form id="contactForm">
      <input id="name" placeholder="Full Name" required />
      <br /><br />
      <input id="phone" placeholder="Phone" required />
      <br /><br />
      <select id="eventType" required>
        <option value="">Select Event</option>
        <option>Wedding</option>
        <option>Funeral</option>
        <option>Birthday</option>
      </select>
      <br /><br />
      <input type="date" id="eventDate" required />
      <br /><br />
      <input id="location" placeholder="Location" required />
      <br /><br />
      <textarea id="details" placeholder="Details" required></textarea>
      <br /><br />
      <button type="submit">Submit</button>
    </form>
    <p id="formStatus"></p>
  </div>
</div>

<footer>Â© 2025 Jundlela Trading</footer>

<script>
/***************************
 * ADMIN FUNCTIONS
 ***************************/
function openAdmin() {
  let ADMIN_PIN = localStorage.getItem('adminPin') || '1234';
  const pinInput = document.getElementById('adminPin').value;
  if (pinInput === ADMIN_PIN) {
    document.getElementById('admin').style.display = 'block';
    document.getElementById('adminGate').style.display = 'none';
  } else {
    document.getElementById('adminStatus').innerText = 'Incorrect PIN';
  }
}

function loadBookings() {
  const body = document.getElementById('bookingsBody');
  body.innerHTML = '';
  const bookings = JSON.parse(localStorage.getItem('jundlelaBookings')) || [];

  if (bookings.length === 0) {
    body.innerHTML = '<tr><td colspan="7">No bookings</td></tr>';
    return;
  }

  bookings.forEach(b => {
    const row = document.createElement('tr');
    row.innerHTML = `
      <td>${b.name}</td>
      <td>${b.phone}</td>
      <td>${b.event}</td>
      <td>${b.date}</td>
      <td>${b.location}</td>
      <td>${b.details}</td>
      <td>${b.time}</td>
    `;
    body.appendChild(row);
  });
}

function clearBookings() {
  if (!confirm('Clear all bookings?')) return;
  localStorage.setItem('jundlelaBookings', JSON.stringify([]));
  loadBookings();
}

function changePin() {
  const newPin = document.getElementById('newPin').value;
  if (!newPin || newPin.length < 4) {
    alert('PIN must be at least 4 digits');
    return;
  }
  localStorage.setItem('adminPin', newPin);
  ADMIN_PIN = newPin;
  alert('Admin PIN changed successfully');
  document.getElementById('newPin').value = '';
}

/***************************
 * EVENT BINDINGS (SAFE)
 ***************************/
document.getElementById('openAdminBtn').addEventListener('click', openAdmin);
document.getElementById('loadBookingsBtn').addEventListener('click', loadBookings);
document.getElementById('clearBookingsBtn').addEventListener('click', clearBookings);

/***************************
 * BOOKING FORM
 ***************************/
document.getElementById('contactForm').addEventListener('submit', function (e) {
  e.preventDefault();

  const booking = {
    name: document.getElementById('name').value,
    phone: document.getElementById('phone').value,
    event: document.getElementById('eventType').value,
    date: document.getElementById('eventDate').value,
    location: document.getElementById('location').value,
    details: document.getElementById('details').value,
    time: new Date().toLocaleString()
  };

  const bookings = JSON.parse(localStorage.getItem('jundlelaBookings')) || [];
  bookings.push(booking);
  localStorage.setItem('jundlelaBookings', JSON.stringify(bookings));

  const message = encodeURIComponent(
    `NEW BOOKING - Jundlela Trading\n` +
    `Name: ${booking.name}\n` +
    `Phone: ${booking.phone}\n` +
    `Event: ${booking.event}\n` +
    `Date: ${booking.date}\n` +
    `Location: ${booking.location}\n` +
    `Details: ${booking.details}`
  );

  window.location.href = `https://api.whatsapp.com/send?phone=27720276776&text=${message}`;
  document.getElementById('formStatus').innerText = 'Booking sent via WhatsApp';
  e.target.reset();
});
</script>

</body>
</html>

